{"ast":null,"code":"import _regeneratorRuntime from \"/home/dev/Documents/casper chess/casperchess-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/dev/Documents/casper chess/casperchess-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/dev/Documents/casper chess/casperchess-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/dev/Documents/casper chess/casperchess-react/src/App.js\";\nimport { CasperClient, CasperServiceByJsonRPC, CLPublicKey, isConnected, Signer } from \"casper-js-sdk\";\nimport React, { useEffect, useState } from \"react\";\nimport { Routes, Route, Link, Outlet } from \"react-router-dom\";\nimport './style.css';\nimport Home from './pages/Home';\nimport About from './pages/About';\nimport Settings from './pages/Settings';\nimport Nopage from './pages/Nopage';\nimport Game from './pages/Game';\nimport Layout from './pages/Layout';\nvar apiUrl = \"http://localhost:6100/api/rpc\";\nvar casperService = new CasperServiceByJsonRPC(apiUrl);\nvar casperClient = new CasperClient(apiUrl);\n\nfunction App() {\n  var _useState = useState(Boolean),\n      _useState2 = _slicedToArray(_useState, 2),\n      didConnect = _useState2[0],\n      setDidConnect = _useState2[1];\n\n  var _useState3 = useState('0'),\n      _useState4 = _slicedToArray(_useState3, 2),\n      balance = _useState4[0],\n      setBalance = _useState4[1];\n\n  var _useState5 = useState('...'),\n      _useState6 = _slicedToArray(_useState5, 2),\n      address = _useState6[0],\n      setAddress = _useState6[1];\n\n  useEffect(function () {\n    function AccountInformation() {\n      return _AccountInformation.apply(this, arguments);\n    }\n\n    function _AccountInformation() {\n      _AccountInformation = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var isConnected, publicKey, latestBlock, root, balanceUref, bal, _balance;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return window.casperlabsHelper.isConnected();\n\n              case 2:\n                isConnected = _context.sent;\n\n                if (!isConnected) {\n                  _context.next = 20;\n                  break;\n                }\n\n                _context.next = 6;\n                return window.casperlabsHelper.getActivePublicKey();\n\n              case 6:\n                publicKey = _context.sent;\n                _context.next = 9;\n                return casperService.getLatestBlockInfo();\n\n              case 9:\n                latestBlock = _context.sent;\n                _context.next = 12;\n                return casperService.getStateRootHash(latestBlock.block.hash);\n\n              case 12:\n                root = _context.sent;\n                _context.next = 15;\n                return casperService.getAccountBalanceUrefByPublicKey(root, CLPublicKey.fromHex(publicKey));\n\n              case 15:\n                balanceUref = _context.sent;\n                _context.next = 18;\n                return casperService.getAccountBalance(latestBlock.block.header.state_root_hash, balanceUref);\n\n              case 18:\n                bal = _context.sent;\n                _balance = bal.div(1000000000);\n\n              case 20:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n      return _AccountInformation.apply(this, arguments);\n    }\n\n    var accountint = setInterval(AccountInformation, 3000);\n    return accountint;\n  }, [didConnect]);\n\n  function connect() {\n    return _connect.apply(this, arguments);\n  }\n\n  function _connect() {\n    _connect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              try {\n                Signer.sendConnectionRequest().then(console.log('connect')).then(window.casperlabsHelper.isConnected);\n\n                if (isConnected) {\n                  setDidConnect(true);\n                } else {\n                  setDidConnect(false);\n                }\n              } catch (error) {\n                console.log(error);\n              }\n\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return _connect.apply(this, arguments);\n  }\n\n  function disconnect() {\n    return _disconnect.apply(this, arguments);\n  }\n  /* const [balance, setBalance] = useState('0');\n   const [address, setAddress] = useState('...');\n  \n   \n    useEffect(() => {\n     async function AccountInformation() {\n        const isConnected = await window.casperlabsHelper.isConnected();\n       if (isConnected) {\n         const publicKey = await window.casperlabsHelper.getActivePublicKey();\n         const latestBlock = await casperService.getLatestBlockInfo();\n         const root = await casperService.getStateRootHash(\n           latestBlock.block.hash\n         );\n          const balanceUref =\n           await casperService.getAccountBalanceUrefByPublicKey(\n             root,\n             CLPublicKey.fromHex(publicKey)\n           );\n          //account balance from the last block\n         const bal = await casperService.getAccountBalance(\n           latestBlock.block.header.state_root_hash,\n           balanceUref\n         );\n         const balance = bal.div(1000000000);\n         console.log(isConnected)\n          try {\n           setBalance(balance.toString());\n           setAddress(publicKey);\n         } catch (error) {console.log(`could not set account info`)}\n       \n         \n       }\n       return AccountInformation();\n     }}, []);\n  \n   async function connect(){\n     try{Signer.sendConnectionRequest().then(console.log('connect'))} catch(error){console.log(error)}\n     \n   }\n   async function disconnect(){\n     try{Signer.disconnectFromSite().then(console.log('disconnect'));} catch(error){console.log(error)}\n   }*/\n\n\n  function _disconnect() {\n    _disconnect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              try {\n                Signer.disconnectFromSite().then(console.log('disconnect'));\n              } catch (error) {\n                console.log(error);\n              }\n\n            case 1:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n    return _disconnect.apply(this, arguments);\n  }\n\n  function deploy() {\n    return _deploy.apply(this, arguments);\n  }\n\n  function _deploy() {\n    _deploy = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n    return _deploy.apply(this, arguments);\n  }\n\n  function refresh() {\n    return _refresh.apply(this, arguments);\n  }\n\n  function _refresh() {\n    _refresh = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n      var isConnected, publicKey, latestBlock, root, balanceUref, bal, _balance2;\n\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return window.casperlabsHelper.isConnected();\n\n            case 2:\n              isConnected = _context5.sent;\n\n              if (!isConnected) {\n                _context5.next = 22;\n                break;\n              }\n\n              _context5.next = 6;\n              return window.casperlabsHelper.getActivePublicKey();\n\n            case 6:\n              publicKey = _context5.sent;\n              _context5.next = 9;\n              return casperService.getLatestBlockInfo();\n\n            case 9:\n              latestBlock = _context5.sent;\n              _context5.next = 12;\n              return casperService.getStateRootHash(latestBlock.block.hash);\n\n            case 12:\n              root = _context5.sent;\n              _context5.next = 15;\n              return casperService.getAccountBalanceUrefByPublicKey(root, CLPublicKey.fromHex(publicKey));\n\n            case 15:\n              balanceUref = _context5.sent;\n              _context5.next = 18;\n              return casperService.getAccountBalance(latestBlock.block.header.state_root_hash, balanceUref);\n\n            case 18:\n              bal = _context5.sent;\n              _balance2 = bal.div(1000000000);\n              setBalance(_balance2);\n              setAddress(publicKey);\n\n            case 22:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n    return _refresh.apply(this, arguments);\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"nav\", {\n    className: \"navbar navbar-expand-lg navbar-dark bg-dark\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 1\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    className: \"navbar-brand\",\n    href: \"/Home\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 5\n    }\n  }, \"Casper Chess\"), /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"navbar-nav me-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"nav-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    className: \"nav-link\",\n    id: \"connectBtn\",\n    onClick: connect,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 11\n    }\n  }, \"Connect Signer\")), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"nav-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    className: \"nav-link\",\n    id: \"disconnectBtn\",\n    onClick: disconnect,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 11\n    }\n  }, \"Disconnect Signer\")), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"nav-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    className: \"nav-link\",\n    id: \"deployBtn\",\n    onClick: deploy,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 11\n    }\n  }, \"Save to Chain\"))), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    id: \"addressDisplay\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 9\n    }\n  }, \"Connected account: \", address), /*#__PURE__*/React.createElement(\"li\", {\n    id: \"balanceDisplay\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 9\n    }\n  }, \"Balance: \", balance)))), /*#__PURE__*/React.createElement(Routes, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    path: \"/\",\n    element: /*#__PURE__*/React.createElement(Layout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 34\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    index: true,\n    element: /*#__PURE__*/React.createElement(Home, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 31\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/About\",\n    element: /*#__PURE__*/React.createElement(About, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 39\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/Game\",\n    element: /*#__PURE__*/React.createElement(Game, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 38\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/Settings\",\n    element: /*#__PURE__*/React.createElement(Settings, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 42\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"*\",\n    element: /*#__PURE__*/React.createElement(Nopage, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 34\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Outlet, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }\n  }));\n}\n\nexport default App;","map":{"version":3,"sources":["/home/dev/Documents/casper chess/casperchess-react/src/App.js"],"names":["CasperClient","CasperServiceByJsonRPC","CLPublicKey","isConnected","Signer","React","useEffect","useState","Routes","Route","Link","Outlet","Home","About","Settings","Nopage","Game","Layout","apiUrl","casperService","casperClient","App","Boolean","didConnect","setDidConnect","balance","setBalance","address","setAddress","AccountInformation","window","casperlabsHelper","getActivePublicKey","publicKey","getLatestBlockInfo","latestBlock","getStateRootHash","block","hash","root","getAccountBalanceUrefByPublicKey","fromHex","balanceUref","getAccountBalance","header","state_root_hash","bal","div","accountint","setInterval","connect","sendConnectionRequest","then","console","log","error","disconnect","disconnectFromSite","deploy","refresh"],"mappings":"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","sourcesContent":["import {CasperClient, CasperServiceByJsonRPC, CLPublicKey, isConnected, Signer} from \"casper-js-sdk\";\nimport React, { useEffect, useState } from \"react\";\nimport { Routes, Route, Link, Outlet } from \"react-router-dom\";\nimport './style.css';\nimport Home from './pages/Home';\nimport About from './pages/About';\nimport Settings from './pages/Settings';\nimport Nopage from './pages/Nopage';\nimport Game from './pages/Game';\nimport Layout from './pages/Layout';\n\nconst apiUrl = \"http://localhost:6100/api/rpc\";\nconst casperService = new CasperServiceByJsonRPC(apiUrl);\nconst casperClient = new CasperClient(apiUrl);\n\n\n\nfunction App() {\n\n  const [didConnect, setDidConnect] = useState(Boolean);\n  const [balance, setBalance] = useState('0');\n  const [address, setAddress] = useState('...');\n \n  \n\n  useEffect(() => {\n    async function AccountInformation() {\n      const isConnected = await window.casperlabsHelper.isConnected();\n      if (isConnected) {\n        const publicKey = await window.casperlabsHelper.getActivePublicKey();\n        const latestBlock = await casperService.getLatestBlockInfo();\n        const root = await casperService.getStateRootHash(\n          latestBlock.block.hash\n        );\n\n        const balanceUref =\n          await casperService.getAccountBalanceUrefByPublicKey(\n            root,\n            CLPublicKey.fromHex(publicKey)\n          );\n\n        //account balance from the last block\n        const bal = await casperService.getAccountBalance(\n          latestBlock.block.header.state_root_hash,\n          balanceUref\n        );\n        const balance = bal.div(1000000000);     \n        \n      }\n    }\n    var accountint = setInterval(AccountInformation, 3000)\n    return accountint;\n    \n  }, [didConnect]);\n\n  async function connect(){\n    try{Signer.sendConnectionRequest().then(console.log('connect')).then(window.casperlabsHelper.isConnected)\n    if (isConnected){setDidConnect(true)}\n    else {setDidConnect(false)}\n    \n  } catch(error){console.log(error)}\n    \n  }\n  async function disconnect(){\n    try{Signer.disconnectFromSite().then(console.log('disconnect'));} catch(error){console.log(error)}\n  }\n\n \n /* const [balance, setBalance] = useState('0');\n  const [address, setAddress] = useState('...');\n \n  \n\n  useEffect(() => {\n    async function AccountInformation() {\n\n      const isConnected = await window.casperlabsHelper.isConnected();\n      if (isConnected) {\n        const publicKey = await window.casperlabsHelper.getActivePublicKey();\n        const latestBlock = await casperService.getLatestBlockInfo();\n        const root = await casperService.getStateRootHash(\n          latestBlock.block.hash\n        );\n\n        const balanceUref =\n          await casperService.getAccountBalanceUrefByPublicKey(\n            root,\n            CLPublicKey.fromHex(publicKey)\n          );\n\n        //account balance from the last block\n        const bal = await casperService.getAccountBalance(\n          latestBlock.block.header.state_root_hash,\n          balanceUref\n        );\n        const balance = bal.div(1000000000);\n        console.log(isConnected)\n\n        try {\n          setBalance(balance.toString());\n          setAddress(publicKey);\n        } catch (error) {console.log(`could not set account info`)}\n      \n        \n      }\n      return AccountInformation();\n    }}, []);\n\n\n  async function connect(){\n    try{Signer.sendConnectionRequest().then(console.log('connect'))} catch(error){console.log(error)}\n    \n  }\n  async function disconnect(){\n    try{Signer.disconnectFromSite().then(console.log('disconnect'));} catch(error){console.log(error)}\n  }*/\n  async function deploy(){\n    \n  }\n  async function refresh(){\n    const isConnected = await window.casperlabsHelper.isConnected();\n    if (isConnected) {\n      const publicKey = await window.casperlabsHelper.getActivePublicKey();\n      const latestBlock = await casperService.getLatestBlockInfo();\n      const root = await casperService.getStateRootHash(\n        latestBlock.block.hash\n      );\n\n      const balanceUref =\n        await casperService.getAccountBalanceUrefByPublicKey(\n          root,\n          CLPublicKey.fromHex(publicKey)\n        );\n\n      //account balance from the last block\n      const bal = await casperService.getAccountBalance(\n        latestBlock.block.header.state_root_hash,\n        balanceUref\n      );\n      const balance = bal.div(1000000000);\n      \n      setBalance(balance);\n      setAddress(publicKey);\n      \n  }}\n\n\n  return (\n    <div>\n\n<nav className=\"navbar navbar-expand-lg navbar-dark bg-dark\">\n  <div className=\"container-fluid\">\n    <a className=\"navbar-brand\" href=\"/Home\">Casper Chess</a>\n   \n      <ul className=\"navbar-nav me-auto\">\n        <Layout />\n       <li className=\"nav-item\">\n          <a className=\"nav-link\" id=\"connectBtn\" onClick={connect} >Connect Signer</a>\n        </li>\n        <li className=\"nav-item\">\n          <a className=\"nav-link\" id=\"disconnectBtn\" onClick={disconnect} >Disconnect Signer</a>\n        </li>\n        <li className=\"nav-item\">\n          <a className=\"nav-link\" id=\"deployBtn\" onClick={deploy} >Save to Chain</a>\n        </li>\n      </ul>\n\n      <ul>\n        <li id=\"addressDisplay\">Connected account: {address}</li>\n        <li id=\"balanceDisplay\">Balance: {balance}</li>\n      </ul>\n  </div>\n</nav>\n      <Routes>\n        <Route path=\"/\" element={<Layout />} />\n        <Route index element={<Home />} />\n        <Route path=\"/About\" element={<About />} />\n        <Route path=\"/Game\" element={<Game />} />\n        <Route path=\"/Settings\" element={<Settings />} />\n        <Route path=\"*\" element={<Nopage />} />\n      </Routes>\n      <Outlet />\n      </div>\n    \n\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}
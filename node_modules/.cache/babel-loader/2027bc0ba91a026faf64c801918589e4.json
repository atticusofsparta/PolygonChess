{"ast":null,"code":"import _objectSpread from \"/home/dev/Documents/casper chess/casperchess-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/home/dev/Documents/casper chess/casperchess-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/dev/Documents/casper chess/casperchess-react/src/pages/Game.js\";\nimport { useRef, useState } from 'react';\nimport Chess from 'chess.js';\nimport { Chessboard } from 'react-chessboard';\nexport default function Game(_ref) {\n  var boardWidth = _ref.boardWidth;\n  var chessboardRef = useRef();\n\n  var _useState = useState(new Chess()),\n      _useState2 = _slicedToArray(_useState, 2),\n      game = _useState2[0],\n      setGame = _useState2[1];\n\n  function safeGameMutate(modify) {\n    setGame(function (g) {\n      var update = _objectSpread({}, g);\n\n      modify(update);\n      return update;\n    });\n  }\n\n  function onDrop(sourceSquare, targetSquare) {\n    var gameCopy = _objectSpread({}, game);\n\n    var move = gameCopy.move({\n      from: sourceSquare,\n      to: targetSquare,\n      promotion: 'q' // always promote to a queen for example simplicity\n\n    });\n    setGame(gameCopy);\n    return move;\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Chessboard, {\n    id: \"PlayVsPlay\",\n    animationDuration: 200,\n    boardWidth: boardWidth,\n    position: game.fen(),\n    onPieceDrop: onDrop,\n    customBoardStyle: {\n      borderRadius: '4px',\n      boxShadow: '0 5px 15px rgba(0, 0, 0, 0.5)'\n    },\n    ref: chessboardRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"rc-button\",\n    onClick: function onClick() {\n      safeGameMutate(function (game) {\n        game.reset();\n      });\n      chessboardRef.current.clearPremoves();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }\n  }, \"reset\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"rc-button\",\n    onClick: function onClick() {\n      safeGameMutate(function (game) {\n        game.undo();\n      });\n      chessboardRef.current.clearPremoves();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }\n  }, \"undo\"));\n}","map":{"version":3,"sources":["/home/dev/Documents/casper chess/casperchess-react/src/pages/Game.js"],"names":["useRef","useState","Chess","Chessboard","Game","boardWidth","chessboardRef","game","setGame","safeGameMutate","modify","g","update","onDrop","sourceSquare","targetSquare","gameCopy","move","from","to","promotion","fen","borderRadius","boxShadow","reset","current","clearPremoves","undo"],"mappings":";;;AAAA,SAASA,MAAT,EAAiBC,QAAjB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,UAAlB;AAEA,SAASC,UAAT,QAA2B,kBAA3B;AAEA,eAAe,SAASC,IAAT,OAA8B;AAAA,MAAdC,UAAc,QAAdA,UAAc;AAC3C,MAAMC,aAAa,GAAGN,MAAM,EAA5B;;AAD2C,kBAEnBC,QAAQ,CAAC,IAAIC,KAAJ,EAAD,CAFW;AAAA;AAAA,MAEpCK,IAFoC;AAAA,MAE9BC,OAF8B;;AAI3C,WAASC,cAAT,CAAwBC,MAAxB,EAAgC;AAC9BF,IAAAA,OAAO,CAAC,UAACG,CAAD,EAAO;AACb,UAAMC,MAAM,qBAAQD,CAAR,CAAZ;;AACAD,MAAAA,MAAM,CAACE,MAAD,CAAN;AACA,aAAOA,MAAP;AACD,KAJM,CAAP;AAKD;;AAED,WAASC,MAAT,CAAgBC,YAAhB,EAA8BC,YAA9B,EAA4C;AAC1C,QAAMC,QAAQ,qBAAQT,IAAR,CAAd;;AACA,QAAMU,IAAI,GAAGD,QAAQ,CAACC,IAAT,CAAc;AACzBC,MAAAA,IAAI,EAAEJ,YADmB;AAEzBK,MAAAA,EAAE,EAAEJ,YAFqB;AAGzBK,MAAAA,SAAS,EAAE,GAHc,CAGV;;AAHU,KAAd,CAAb;AAKAZ,IAAAA,OAAO,CAACQ,QAAD,CAAP;AACA,WAAOC,IAAP;AACD;;AAED,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,UAAD;AACE,IAAA,EAAE,EAAC,YADL;AAEE,IAAA,iBAAiB,EAAE,GAFrB;AAGE,IAAA,UAAU,EAAEZ,UAHd;AAIE,IAAA,QAAQ,EAAEE,IAAI,CAACc,GAAL,EAJZ;AAKE,IAAA,WAAW,EAAER,MALf;AAME,IAAA,gBAAgB,EAAE;AAChBS,MAAAA,YAAY,EAAE,KADE;AAEhBC,MAAAA,SAAS,EAAE;AAFK,KANpB;AAUE,IAAA,GAAG,EAAEjB,aAVP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAaE;AACE,IAAA,SAAS,EAAC,WADZ;AAEE,IAAA,OAAO,EAAE,mBAAM;AACbG,MAAAA,cAAc,CAAC,UAACF,IAAD,EAAU;AACvBA,QAAAA,IAAI,CAACiB,KAAL;AACD,OAFa,CAAd;AAGAlB,MAAAA,aAAa,CAACmB,OAAd,CAAsBC,aAAtB;AACD,KAPH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAbF,eAwBE;AACE,IAAA,SAAS,EAAC,WADZ;AAEE,IAAA,OAAO,EAAE,mBAAM;AACbjB,MAAAA,cAAc,CAAC,UAACF,IAAD,EAAU;AACvBA,QAAAA,IAAI,CAACoB,IAAL;AACD,OAFa,CAAd;AAGArB,MAAAA,aAAa,CAACmB,OAAd,CAAsBC,aAAtB;AACD,KAPH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAxBF,CADF;AAsCD","sourcesContent":["import { useRef, useState } from 'react';\nimport Chess from 'chess.js';\n\nimport { Chessboard } from 'react-chessboard';\n\nexport default function Game({ boardWidth }) {\n  const chessboardRef = useRef();\n  const [game, setGame] = useState(new Chess());\n\n  function safeGameMutate(modify) {\n    setGame((g) => {\n      const update = { ...g };\n      modify(update);\n      return update;\n    });\n  }\n\n  function onDrop(sourceSquare, targetSquare) {\n    const gameCopy = { ...game };\n    const move = gameCopy.move({\n      from: sourceSquare,\n      to: targetSquare,\n      promotion: 'q' // always promote to a queen for example simplicity\n    });\n    setGame(gameCopy);\n    return move;\n  }\n\n  return (\n    <div>\n      <Chessboard\n        id=\"PlayVsPlay\"\n        animationDuration={200}\n        boardWidth={boardWidth}\n        position={game.fen()}\n        onPieceDrop={onDrop}\n        customBoardStyle={{\n          borderRadius: '4px',\n          boxShadow: '0 5px 15px rgba(0, 0, 0, 0.5)'\n        }}\n        ref={chessboardRef}\n      />\n      <button\n        className=\"rc-button\"\n        onClick={() => {\n          safeGameMutate((game) => {\n            game.reset();\n          });\n          chessboardRef.current.clearPremoves();\n        }}\n      >\n        reset\n      </button>\n      <button\n        className=\"rc-button\"\n        onClick={() => {\n          safeGameMutate((game) => {\n            game.undo();\n          });\n          chessboardRef.current.clearPremoves();\n        }}\n      >\n        undo\n      </button>\n    </div>\n  );\n}"]},"metadata":{},"sourceType":"module"}
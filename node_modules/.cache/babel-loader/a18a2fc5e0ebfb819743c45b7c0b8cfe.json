{"ast":null,"code":"import _regeneratorRuntime from \"/home/dev/Documents/casperchess/casperchess-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/dev/Documents/casperchess/casperchess-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/dev/Documents/casperchess/casperchess-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/dev/Documents/casperchess/casperchess-react/src/App.js\";\nimport { CasperClient, CasperServiceByJsonRPC, CLPublicKey, CLValueBuilder, isConnected, Signer, Contracts } from \"casper-js-sdk\";\nimport React, { useEffect, useState } from \"react\";\nimport { Routes, Route, Link, Outlet } from \"react-router-dom\";\nimport './style.css';\nimport Home from './pages/Home';\nimport About from './pages/About';\nimport Settings from './pages/Settings';\nimport Nopage from './pages/Nopage';\nimport Game from './pages/Game';\nimport Layout from './pages/Layout';\nimport axios from \"axios\";\nvar apiUrl = \"http://localhost:6100/api\";\nvar casperService = new CasperServiceByJsonRPC(apiUrl);\nvar casperClient = new CasperClient(apiUrl);\nvar client = new CasperClient(apiUrl);\nvar contract = new Contracts.Contract(client);\nvar singleplayer_contract = \"hash-e951e1ca48071ebda74eed2295a2dc34ba5241bb533be9062fc9de84eda45c12\";\n\nfunction App() {\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      balance = _useState2[0],\n      setBalance = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      address = _useState4[0],\n      setAddress = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      total_games = _useState6[0],\n      setTotal_Games = _useState6[1];\n\n  var _useState7 = useState(''),\n      _useState8 = _slicedToArray(_useState7, 2),\n      wins = _useState8[0],\n      setWins = _useState8[1];\n\n  var _useState9 = useState(''),\n      _useState10 = _slicedToArray(_useState9, 2),\n      losses = _useState10[0],\n      setLosses = _useState10[1];\n\n  var _useState11 = useState(''),\n      _useState12 = _slicedToArray(_useState11, 2),\n      stalemates = _useState12[0],\n      setStalemates = _useState12[1];\n\n  var _useState13 = useState(''),\n      _useState14 = _slicedToArray(_useState13, 2),\n      history = _useState14[0],\n      setHistory = _useState14[1];\n\n  useEffect(function () {\n    // get account info for user from smart contract\n    setTotal_Games();\n  }, [deploy]);\n  useEffect(function () {\n    //set html\n    var textAddress = document.getElementById('textAddress');\n    var textBalance = document.getElementById('textBalance');\n    textAddress.textContent = \"Connected account: \".concat(address.replace(address.slice(5, 61), ' . . . '));\n    textBalance.textContent = \"Balance: \".concat(balance / 1000000000);\n  }, [address, balance]);\n  useEffect(function () {\n    function AccountInfo() {\n      return _AccountInfo.apply(this, arguments);\n    }\n\n    function _AccountInfo() {\n      _AccountInfo = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var isConnected, publicKey;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return window.casperlabsHelper.isConnected();\n\n              case 2:\n                isConnected = _context.sent;\n                _context.next = 5;\n                return window.casperlabsHelper.getActivePublicKey();\n\n              case 5:\n                publicKey = _context.sent;\n                setAddress(publicKey);\n                axios.post('http://localhost:6100/balance', {\n                  \"publicKey\": publicKey\n                }).then(function (response) {\n                  var bal = response.data;\n                  setBalance(bal);\n                  console.log(bal);\n                });\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n      return _AccountInfo.apply(this, arguments);\n    }\n\n    var accountinfoint = setInterval(AccountInfo, 5000);\n    return accountinfoint;\n  }, []);\n\n  function connect() {\n    return _connect.apply(this, arguments);\n  }\n\n  function _connect() {\n    _connect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              try {\n                Signer.sendConnectionRequest().then(console.log('connect'));\n              } catch (error) {\n                console.log(error);\n              }\n\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return _connect.apply(this, arguments);\n  }\n\n  function disconnect() {\n    return _disconnect.apply(this, arguments);\n  }\n\n  function _disconnect() {\n    _disconnect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              try {\n                Signer.disconnectFromSite().then(console.log('disconnect'));\n              } catch (error) {\n                console.log(error);\n              }\n\n            case 1:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n    return _disconnect.apply(this, arguments);\n  }\n\n  function deploy() {\n    return _deploy.apply(this, arguments);\n  }\n\n  function _deploy() {\n    _deploy = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var args, pubkey, result, deployJSON;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              if (!(activeKey == null)) {\n                _context4.next = 3;\n                break;\n              }\n\n              //Need to be connected to the Signer to continue\n              alert(\"Please unlock the signer to continue\");\n              return _context4.abrupt(\"return\");\n\n            case 3:\n              args = RuntimeArgs.fromMap({\n                //Need to build a UInt512 CLValue and package into RuntimeArgs\n                \"total_games\": CLValueBuilder.u512(total_games),\n                \"wins\": CLValueBuilder.u512(total_games),\n                \"losses\": CLValueBuilder.u512(total_games),\n                \"stalemates\": CLValueBuilder.u512(total_games),\n                \"history\": CLValueBuilder.u512(history)\n              });\n              pubkey = CLPublicKey.fromHex(activeKey); //Build CLPublicKey from hex representation of public key\n\n              contract.setContractHash(singleplayer_contract); //Sets the contract hash of the Contract instance. The hash of our highscore contract\n\n              result = contract.callEntrypoint(\"add_game\", args, pubkey, \"casper-test\", csprToMotes(1).toString(), [], 10000000); //Builds a Deploy object at add_highscore entrypoint\n\n              deployJSON = DeployUtil.deployToJson(result);\n              Signer.sign(deployJSON, activeKey).then(function (success) {\n                //Initiates sign request\n                sendDeploy(success);\n              }).catch(function (error) {\n                console.log(error);\n              });\n\n            case 9:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n    return _deploy.apply(this, arguments);\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"nav\", {\n    className: \"navbar navbar-expand-lg navbar-dark bg-dark\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 1\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    className: \"navbar-brand\",\n    href: \"/Home\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 5\n    }\n  }, \"Casper Chess\"), /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"navbar-nav me-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"nav-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    className: \"nav-link\",\n    id: \"connectBtn\",\n    onClick: connect,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 11\n    }\n  }, \"Connect Signer\")), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"nav-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    className: \"nav-link\",\n    id: \"disconnectBtn\",\n    onClick: disconnect,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 11\n    }\n  }, \"Disconnect Signer\")), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"nav-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    className: \"nav-link\",\n    id: \"deployBtn\",\n    onClick: deploy,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 11\n    }\n  }, \"Save to Chain\"))), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    id: \"textAddress\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }\n  }, \"Connected account: \"), /*#__PURE__*/React.createElement(\"li\", {\n    id: \"textBalance\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }\n  }, \"Balance: \")))), /*#__PURE__*/React.createElement(Routes, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    path: \"/\",\n    element: /*#__PURE__*/React.createElement(Layout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 34\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    index: true,\n    element: /*#__PURE__*/React.createElement(Home, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 31\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/About\",\n    element: /*#__PURE__*/React.createElement(About, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 39\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/Game\",\n    element: /*#__PURE__*/React.createElement(Game, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 38\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/Settings\",\n    element: /*#__PURE__*/React.createElement(Settings, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 42\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"*\",\n    element: /*#__PURE__*/React.createElement(Nopage, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 34\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Outlet, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }\n  }));\n}\n\nexport default App;","map":{"version":3,"sources":["/home/dev/Documents/casperchess/casperchess-react/src/App.js"],"names":["CasperClient","CasperServiceByJsonRPC","CLPublicKey","CLValueBuilder","isConnected","Signer","Contracts","React","useEffect","useState","Routes","Route","Link","Outlet","Home","About","Settings","Nopage","Game","Layout","axios","apiUrl","casperService","casperClient","client","contract","Contract","singleplayer_contract","App","balance","setBalance","address","setAddress","total_games","setTotal_Games","wins","setWins","losses","setLosses","stalemates","setStalemates","history","setHistory","deploy","textAddress","document","getElementById","textBalance","textContent","replace","slice","AccountInfo","window","casperlabsHelper","getActivePublicKey","publicKey","post","then","response","bal","data","console","log","accountinfoint","setInterval","connect","sendConnectionRequest","error","disconnect","disconnectFromSite","activeKey","alert","args","RuntimeArgs","fromMap","u512","pubkey","fromHex","setContractHash","result","callEntrypoint","csprToMotes","toString","deployJSON","DeployUtil","deployToJson","sign","success","sendDeploy","catch"],"mappings":"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","sourcesContent":["import {CasperClient, CasperServiceByJsonRPC, CLPublicKey, CLValueBuilder, isConnected, Signer, Contracts} from \"casper-js-sdk\";\nimport React, { useEffect, useState } from \"react\";\nimport { Routes, Route, Link, Outlet } from \"react-router-dom\";\nimport './style.css';\nimport Home from './pages/Home';\nimport About from './pages/About';\nimport Settings from './pages/Settings';\nimport Nopage from './pages/Nopage';\nimport Game from './pages/Game';\nimport Layout from './pages/Layout';\nimport axios from \"axios\";\n\n\nconst apiUrl = \"http://localhost:6100/api\";\nconst casperService = new CasperServiceByJsonRPC(apiUrl);\nconst casperClient = new CasperClient(apiUrl);\nconst client = new CasperClient(apiUrl);\nconst contract = new Contracts.Contract(client);\nconst singleplayer_contract = \"hash-e951e1ca48071ebda74eed2295a2dc34ba5241bb533be9062fc9de84eda45c12\";\n\n\n\nfunction App() {\n\n \n  const [balance, setBalance] = useState('');\n  const [address, setAddress] = useState('');\n  const [total_games, setTotal_Games] = useState('');\n  const [wins, setWins] = useState('');\n  const [losses, setLosses] = useState('');\n  const [stalemates, setStalemates] = useState('');\n  const [history, setHistory] = useState('');\n\n  useEffect(()=>{ // get account info for user from smart contract\n    \n    setTotal_Games()\n\n  }, [deploy])\n\n  useEffect(()=>{ //set html\n    const textAddress = document.getElementById('textAddress');\n    const textBalance = document.getElementById('textBalance');\n    textAddress.textContent = `Connected account: ${address.replace(address.slice(5, 61), ' . . . ')}`\n    textBalance.textContent = `Balance: ${balance / 1000000000}`\n  },[address, balance])\n \n  useEffect(()=>{\n    async function AccountInfo(){\n      const isConnected = await window.casperlabsHelper.isConnected()\n      const publicKey = await window.casperlabsHelper.getActivePublicKey();\n            setAddress(publicKey);\n           axios.post('http://localhost:6100/balance', {\"publicKey\": publicKey}).then((response) => {\n             const bal = response.data;\n             setBalance(bal)\n             console.log(bal)\n           }\n           )\n             \n      \n          }\n    var accountinfoint = setInterval(AccountInfo, 5000)\n    return accountinfoint;\n    \n      \n  },[])\n\n  async function connect(){\n    try{Signer.sendConnectionRequest().then(console.log('connect'))\n    \n  } catch(error){console.log(error)}\n    \n  }\n  async function disconnect(){\n    try{Signer.disconnectFromSite().then(console.log('disconnect'));} catch(error){console.log(error)}\n  }\n\n  async function deploy() {\n    if (activeKey == null) { //Need to be connected to the Signer to continue\n      alert(\"Please unlock the signer to continue\");\n      return;\n    }\n    \n    const args = RuntimeArgs.fromMap({ //Need to build a UInt512 CLValue and package into RuntimeArgs\n       \"total_games\": CLValueBuilder.u512(total_games),\n       \"wins\": CLValueBuilder.u512(total_games),\n       \"losses\": CLValueBuilder.u512(total_games),\n       \"stalemates\": CLValueBuilder.u512(total_games),\n       \"history\": CLValueBuilder.u512(history)\n      }); \n      \n    const pubkey = CLPublicKey.fromHex(activeKey); //Build CLPublicKey from hex representation of public key\n    contract.setContractHash(singleplayer_contract); //Sets the contract hash of the Contract instance. The hash of our highscore contract\n    const result = contract.callEntrypoint(\"add_game\", args, pubkey, \"casper-test\", csprToMotes(1).toString(), [], 10000000); //Builds a Deploy object at add_highscore entrypoint\n    const deployJSON = DeployUtil.deployToJson(result);\n    Signer.sign(deployJSON, activeKey).then((success) => { //Initiates sign request\n      sendDeploy(success);\n    }).catch((error) => {\n      console.log(error);\n    });\n  }\n\n\n  return (\n    <div>\n\n<nav className=\"navbar navbar-expand-lg navbar-dark bg-dark\">\n  <div className=\"container-fluid\">\n    <a className=\"navbar-brand\" href=\"/Home\">Casper Chess</a>\n   \n      <ul className=\"navbar-nav me-auto\">\n        <Layout />\n       <li className=\"nav-item\">\n          <a className=\"nav-link\" id=\"connectBtn\" onClick={connect} >Connect Signer</a>\n        </li>\n        <li className=\"nav-item\">\n          <a className=\"nav-link\" id=\"disconnectBtn\" onClick={disconnect} >Disconnect Signer</a>\n        </li>\n        <li className=\"nav-item\">\n          <a className=\"nav-link\" id=\"deployBtn\" onClick={deploy} >Save to Chain</a>\n        </li>\n      </ul>\n\n      <ul >\n        <li id=\"textAddress\">Connected account: </li>\n        <li id=\"textBalance\">Balance: </li>\n      </ul>\n  </div>\n</nav>\n      <Routes>\n        <Route path=\"/\" element={<Layout />} />\n        <Route index element={<Home />} />\n        <Route path=\"/About\" element={<About />} />\n        <Route path=\"/Game\" element={<Game />} />\n        <Route path=\"/Settings\" element={<Settings />} />\n        <Route path=\"*\" element={<Nopage />} />\n      </Routes>\n      <Outlet />\n      </div>\n    \n\n  );\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}
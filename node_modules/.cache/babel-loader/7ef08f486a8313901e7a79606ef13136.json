{"ast":null,"code":"import _objectSpread from \"/home/dev/Documents/casper chess/casperchess-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/home/dev/Documents/casper chess/casperchess-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/dev/Documents/casper chess/casperchess-react/src/pages/Game.js\";\nimport React, { useEffect, useRef, useState } from 'react';\nimport Chess from 'chess.js';\nimport '../style.css';\nimport { Chessboard } from 'react-chessboard';\nexport default function Game(_ref) {\n  var boardWidth = _ref.boardWidth;\n  var chessboardRef = useRef();\n\n  var _useState = useState(new Chess()),\n      _useState2 = _slicedToArray(_useState, 2),\n      game = _useState2[0],\n      setGame = _useState2[1];\n\n  var _useState3 = useState('white'),\n      _useState4 = _slicedToArray(_useState3, 2),\n      boardOrientation = _useState4[0],\n      setBoardOrientation = _useState4[1];\n\n  var _useState5 = useState(undefined),\n      _useState6 = _slicedToArray(_useState5, 2),\n      currentTimeout = _useState6[0],\n      setCurrentTimeout = _useState6[1];\n\n  function safeGameMutate(modify) {\n    setGame(function (g) {\n      var update = _objectSpread({}, g);\n\n      modify(update);\n      return update;\n    });\n  }\n\n  function makeRandomMove() {\n    var possibleMoves = game.moves(); // exit if the game is over\n\n    if (game.game_over() || game.in_draw() || possibleMoves.length === 0) return;\n    var randomIndex = Math.floor(Math.random() * possibleMoves.length);\n    safeGameMutate(function (game) {\n      game.move(possibleMoves[randomIndex]);\n    });\n  }\n\n  function onDrop(sourceSquare, targetSquare) {\n    var gameCopy = _objectSpread({}, game);\n\n    var move = gameCopy.move({\n      from: sourceSquare,\n      to: targetSquare,\n      promotion: 'q' // always promote to a queen for example simplicity\n\n    });\n    setGame(gameCopy); // illegal move\n\n    if (move === null) return false; // store timeout so it can be cleared on undo/reset so computer doesn't execute move\n\n    var newTimeout = setTimeout(makeRandomMove, 200);\n    setCurrentTimeout(newTimeout);\n    return true;\n  }\n\n  function FenLogger() {\n    //initialize move content\n    useEffect(function () {\n      var newMove = game.history({\n        verbose: true\n      });\n      console.log(newMove); // const parseMove = JSON.stringify(newMove)\n\n      var parseMove = JSON.stringify(newMove);\n      var logMove = parseMove;\n\n      if (null) {\n        document.getElementById('fenlogger').innerHTML = 'Make a move...';\n      } else {\n        document.getElementById('fenlogger').innerHTML = logMove;\n      }\n    }, []); // returns json\n\n    /**\n     * [{ color: 'w', from: 'e2', to: 'e4', flags: 'b', piece: 'p', san: 'e4' }]\n     */\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      id: \"fenlogger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 13\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: \"gameContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"boardContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Chessboard, {\n    id: \"myboard\",\n    animationDuration: 200,\n    boardOrientation: boardOrientation,\n    boardWidth: boardWidth,\n    position: game.fen(),\n    onPieceDrop: onDrop,\n    customBoardStyle: {\n      borderRadius: '4px',\n      boxShadow: '0 5px 15px rgba(0, 0, 0, 0.5)'\n    },\n    ref: chessboardRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(FenLogger, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"boardBtnContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 11\n    }\n  }, \" \", /*#__PURE__*/React.createElement(\"button\", {\n    id: \"boardBtn\",\n    className: \"rc-button\",\n    onClick: function onClick() {\n      safeGameMutate(function (game) {\n        game.reset();\n      }); // stop any current timeouts\n\n      clearTimeout(currentTimeout);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 40\n    }\n  }, \"reset\"), /*#__PURE__*/React.createElement(\"button\", {\n    id: \"boardBtn\",\n    className: \"rc-button\",\n    onClick: function onClick() {\n      safeGameMutate(function (game) {\n        game.undo();\n      }); // stop any current timeouts\n\n      clearTimeout(currentTimeout);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }\n  }, \"undo\")));\n}\n/**\n *  \n */","map":{"version":3,"sources":["/home/dev/Documents/casper chess/casperchess-react/src/pages/Game.js"],"names":["React","useEffect","useRef","useState","Chess","Chessboard","Game","boardWidth","chessboardRef","game","setGame","boardOrientation","setBoardOrientation","undefined","currentTimeout","setCurrentTimeout","safeGameMutate","modify","g","update","makeRandomMove","possibleMoves","moves","game_over","in_draw","length","randomIndex","Math","floor","random","move","onDrop","sourceSquare","targetSquare","gameCopy","from","to","promotion","newTimeout","setTimeout","FenLogger","newMove","history","verbose","console","log","parseMove","JSON","stringify","logMove","document","getElementById","innerHTML","fen","borderRadius","boxShadow","reset","clearTimeout","undo"],"mappings":"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","sourcesContent":["import React, {useEffect, useRef, useState } from 'react';\nimport Chess from 'chess.js';\nimport '../style.css';\n\nimport { Chessboard } from 'react-chessboard';\n\nexport default function Game({ boardWidth }) {\n    const chessboardRef = useRef();\n    const [game, setGame] = useState(new Chess());\n    const [boardOrientation, setBoardOrientation] = useState('white');\n    const [currentTimeout, setCurrentTimeout] = useState(undefined);\n  \n    function safeGameMutate(modify) {\n      setGame((g) => {\n        const update = { ...g };\n        modify(update);\n        return update;\n      });\n    }\n  \n    function makeRandomMove() {\n      const possibleMoves = game.moves();\n  \n      // exit if the game is over\n      if (game.game_over() || game.in_draw() || possibleMoves.length === 0) return;\n  \n      const randomIndex = Math.floor(Math.random() * possibleMoves.length);\n      safeGameMutate((game) => {\n        game.move(possibleMoves[randomIndex]);\n      });\n    }\n  \n    function onDrop(sourceSquare, targetSquare) {\n      const gameCopy = { ...game };\n      const move = gameCopy.move({\n        from: sourceSquare,\n        to: targetSquare,\n        promotion: 'q' // always promote to a queen for example simplicity\n      });\n      setGame(gameCopy);\n  \n      // illegal move\n      if (move === null) return false;\n  \n      // store timeout so it can be cleared on undo/reset so computer doesn't execute move\n      const newTimeout = setTimeout(makeRandomMove, 200);\n      setCurrentTimeout(newTimeout);\n      return true;\n    }\n  \n    function FenLogger (){\n\n        //initialize move content\n        useEffect(()=>{\n            const newMove = game.history({ verbose: true })\n            console.log(newMove)\n           // const parseMove = JSON.stringify(newMove)\n           const parseMove = JSON.stringify(newMove);\n            const logMove = parseMove\n            if (null) { document.getElementById('fenlogger').innerHTML = 'Make a move...' }\n        else {document.getElementById('fenlogger').innerHTML = logMove}\n        },[])\n       \n         // returns json\n\n        /**\n         * [{ color: 'w', from: 'e2', to: 'e4', flags: 'b', piece: 'p', san: 'e4' }]\n         */\n\n        return (\n            <div id=\"fenlogger\"></div>\n        )\n    }\n\n    return (\n        <div id=\"gameContainer\">\n      <div id=\"boardContainer\">\n        <Chessboard\n          id=\"myboard\"\n          animationDuration={200}\n          boardOrientation={boardOrientation}\n          boardWidth={boardWidth}\n          position={game.fen()}\n          onPieceDrop={onDrop}\n          customBoardStyle={{\n            borderRadius: '4px',\n            boxShadow: '0 5px 15px rgba(0, 0, 0, 0.5)'\n          }}\n          ref={chessboardRef}\n        />\n        <FenLogger />\n        </div>\n          <div id=\"boardBtnContainer\"> <button id=\"boardBtn\"\n          className=\"rc-button\"\n          onClick={() => {\n            safeGameMutate((game) => {\n              game.reset();\n            });\n            // stop any current timeouts\n            clearTimeout(currentTimeout);\n          }}\n        >\n          reset\n        </button>\n\n        <button id=\"boardBtn\"\n          className=\"rc-button\"\n          onClick={() => {\n            safeGameMutate((game) => {\n              game.undo();\n            });\n            // stop any current timeouts\n            clearTimeout(currentTimeout);\n          }}\n        >\n          undo\n        </button></div>\n\n      </div>\n      \n    );\n  }\n  /**\n   *  \n   */"]},"metadata":{},"sourceType":"module"}